<div class="container-fluid " style="background-color: #F4F4F4;">
    <div class="row ">
        <!-- Left Side (Form) -->
        <div class="col-md-6 d-flex flex-column ps-5  ">
            <div class="login-container">
                <!-- Spectra Logo -->
                <img src="../../../assets/images/spectra-logo.png" alt="Spectra Logo" class="spectra-logo">

                <!-- Custom Stepper -->
                <div class="custom-stepper">
                    <div class="step" [ngClass]="{'active': isStepActive(0), 'completed': isStepCompleted(0)}">
                        <span class="step-text">Enter Email <svg *ngIf="isStepCompleted(0)" width="12" height="12"
                                viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M6 0C2.7 0 0 2.7 0 6C0 9.3 2.7 12 6 12C9.3 12 12 9.3 12 6C12 2.7 9.3 0 6 0ZM4.8 9L1.8 6L2.646 5.154L4.8 7.302L9.354 2.748L10.2 3.6L4.8 9Z"
                                    fill="#99999B" />
                            </svg>
                        </span>
                    </div>
                    <div class="step" [ngClass]="{'active': isStepActive(1), 'completed': isStepCompleted(1)}">
                        <span class="step-text">Verify email <svg *ngIf="isStepCompleted(1)" width="12" height="12"
                                viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M6 0C2.7 0 0 2.7 0 6C0 9.3 2.7 12 6 12C9.3 12 12 9.3 12 6C12 2.7 9.3 0 6 0ZM4.8 9L1.8 6L2.646 5.154L4.8 7.302L9.354 2.748L10.2 3.6L4.8 9Z"
                                    fill="#99999B" />
                            </svg></span>
                    </div>
                </div>



                <!-- Conditional Content Based on Current Step -->
                <ng-container *ngIf="currentStep === 0">
                    <div class="mt-5" style="padding-top: 30px;">
                        <p class="welcome-title">WELCOME TO </p>
                        <p class="spectracard-title"> SPECTRACARD</p>
                        <p class="spectracard-subtext">Generate your Spectra e-card Today!</p>
                        <form (submit)="sendOtp()" class="w-100">
                            <!-- <div class="mb-3">
                                <input type="text" class="form-control" id="name" placeholder="Name" required>
                            </div> -->
                            <div class="mb-3">
                                <input type="email" style="color: #7F7D83;font-size: 14px;max-width: 400px;"
                                    name="email" [(ngModel)]="email" class="form-control" id="email" placeholder="Email"
                                    required #emailInput="ngModel"
                                    pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$">

                                <!-- Error Message Display -->
                                <div *ngIf="errorMessage" class="text-danger ps-3 pt-2">
                                    {{ errorMessage }}
                                </div>
                            </div>

                            <!-- Send OTP Button -->
                            <button type="submit" style="padding: 10px 33px 10px 33px;" class="btn btn-primary"
                                [disabled]="isLoading">
                                <span >Continue </span>
                                <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
                                    aria-hidden="true"></span>
                            </button>
                        </form>
                    </div>

                </ng-container>

                <!-- Step 2: OTP Verification Section -->
                <ng-container *ngIf="currentStep === 1">
                    <div class="verification-section mt-5">
                        <p class="verify-title">Check your email for code</p>
                        <p class="instruction-text">A 4 digit code has been sent to {{ email }}</p>

                        <div class="mt-5">
                            <!-- Input fields for 4-digit code -->
                            <div class="code-inputs d-flex justify-content-start ">
                                <input type="text" maxlength="1" class="form-control code-box" id="codeBox1"
                                    (input)="onInput($event, 0)" (keydown)="onKeyDown($event, 0)">
                                <input type="text" maxlength="1" class="form-control code-box" id="codeBox2"
                                    (input)="onInput($event, 1)" (keydown)="onKeyDown($event, 1)">
                                <input type="text" maxlength="1" class="form-control code-box" id="codeBox3"
                                    (input)="onInput($event, 2)" (keydown)="onKeyDown($event, 2)">
                                <input type="text" maxlength="1" class="form-control code-box" id="codeBox4"
                                    (input)="onInput($event, 3)" (keydown)="onKeyDown($event, 3)">


                            </div>
                            <div *ngIf="errorMessage" class="text-danger  pt-1">
                                {{ errorMessage }}
                            </div>
                            <p class="resend-link " style="padding: 0px;margin: 0px;" (click)="ReSendOtp()">Resend Code  <span *ngIf="isLoading2" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                            </p>
                            <!-- Display Error Message if OTP verification fails -->


                        </div>
                        <!-- Verify OTP Button -->
                        <button class="btn btn-primary mt-4" (click)="verifyOtp()" [disabled]="isLoading">
                            <span >Verify Email</span>
                            <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status"
                                aria-hidden="true"></span>
                        </button>
                    </div>
                </ng-container>



            </div>
        </div>

        <!-- Right Side (Image) -->
        <div class="col-md-6 p-0 d-flex ">
            <img src="../../../assets/images/ecard-login-logo.png" class="img-fluid" alt="E-card Image" />
        </div>
    </div>
</div>